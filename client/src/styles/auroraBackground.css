/* ========================================
   macOS Big Sur 风格动态极光背景 - 修复选择器版本
   ======================================== */

/* 🌈 极光背景 CSS 变量定义 */
:root {
  /* Light Mode 极光配色 - 清新薄荷系 */
  --aurora-color-1: rgba(82, 212, 163, 0.15);   /* 薄荷绿 */
  --aurora-color-2: rgba(79, 179, 224, 0.12);   /* 青蓝 */
  --aurora-color-3: rgba(255, 232, 107, 0.10);  /* 浅黄 */
  --aurora-color-4: rgba(134, 239, 172, 0.11);  /* 浅绿 */
  
  /* 极光动画参数 */
  --aurora-speed-1: 20s;
  --aurora-speed-2: 25s;
  --aurora-speed-3: 30s;
}

/* 🌙 Dark Mode 极光配色 - Cyberpunk紫系 */
.dark {
  --aurora-color-1: rgba(139, 92, 246, 0.18);   /* 紫色 */
  --aurora-color-2: rgba(99, 102, 241, 0.15);   /* 靛蓝 */
  --aurora-color-3: rgba(236, 72, 153, 0.12);   /* 粉红 */
  --aurora-color-4: rgba(168, 85, 247, 0.14);   /* 深紫 */
}

/* ========================================
   Light Mode 页面背景 + 极光
   ======================================== */

/* 🌞 Light Mode: 替换 bg-gray-50 */
.bg-gray-50 {
  /* Light Mode 基础色 + 极光 */
  background: 
    /* 极光层 */
    radial-gradient(
      ellipse 1200px 800px at 20% 30%, 
      var(--aurora-color-1), 
      transparent 70%
    ),
    radial-gradient(
      ellipse 1000px 1000px at 80% 70%, 
      var(--aurora-color-2), 
      transparent 70%
    ),
    radial-gradient(
      ellipse 800px 800px at 60% 40%, 
      var(--aurora-color-3), 
      transparent 60%
    ),
    radial-gradient(
      ellipse 900px 600px at 40% 80%, 
      var(--aurora-color-4), 
      transparent 65%
    ),
    /* 基础背景色 - 最底层 */
    linear-gradient(to bottom, #f9fafb, #f9fafb) !important;
  
  /* 动画设置 */
  background-size: 150% 150%, 130% 130%, 120% 120%, 140% 140%, 100% 100% !important;
  background-attachment: fixed, fixed, fixed, fixed, scroll !important;
  animation: 
    auroraFlow1 var(--aurora-speed-1) ease-in-out infinite,
    auroraFlow2 var(--aurora-speed-2) ease-in-out infinite reverse,
    auroraFlow3 var(--aurora-speed-3) ease-in-out infinite,
    auroraFlow4 calc(var(--aurora-speed-1) * 1.2) ease-in-out infinite reverse !important;
  animation-delay: 0s, 3s, 6s, 9s !important;
}

/* ========================================
   Dark Mode 页面背景 + 极光
   ======================================== */

/* 🌙 Dark Mode: 覆盖 bg-gray-50 为深色 + Cyberpunk极光 */
.dark .bg-gray-50 {
  /* Dark Mode 基础色 + Cyberpunk极光 */
  background: 
    /* Cyberpunk极光层 */
    radial-gradient(
      ellipse 1200px 800px at 25% 25%, 
      var(--aurora-color-1), 
      transparent 65%
    ),
    radial-gradient(
      ellipse 1000px 1200px at 75% 75%, 
      var(--aurora-color-2), 
      transparent 65%
    ),
    radial-gradient(
      ellipse 800px 900px at 50% 30%, 
      var(--aurora-color-3), 
      transparent 60%
    ),
    radial-gradient(
      ellipse 1100px 700px at 30% 70%, 
      var(--aurora-color-4), 
      transparent 70%
    ),
    /* 深色基础背景 - 最底层 */
    linear-gradient(to bottom, #111827, #111827) !important;
  
  /* 动画设置 */
  background-size: 140% 140%, 120% 120%, 110% 110%, 130% 130%, 100% 100% !important;
  background-attachment: fixed, fixed, fixed, fixed, scroll !important;
  animation: 
    auroraDark1 var(--aurora-speed-1) ease-in-out infinite,
    auroraDark2 var(--aurora-speed-2) ease-in-out infinite reverse,
    auroraDark3 var(--aurora-speed-3) ease-in-out infinite,
    auroraDark4 calc(var(--aurora-speed-1) * 1.1) ease-in-out infinite reverse !important;
  animation-delay: 0s, 2s, 4s, 6s !important;
}

/* ========================================
   同样处理其他可能的背景色类
   ======================================== */

/* 处理可能使用 bg-gray-900 的元素 */
.bg-gray-900 {
  background: linear-gradient(to bottom, #f9fafb, #f9fafb) !important;
}

.dark .bg-gray-900 {
  /* 确保dark mode下 bg-gray-900 也有极光 */
  background: 
    radial-gradient(
      ellipse 1000px 600px at 30% 40%, 
      var(--aurora-color-1), 
      transparent 70%
    ),
    radial-gradient(
      ellipse 800px 800px at 70% 60%, 
      var(--aurora-color-2), 
      transparent 70%
    ),
    linear-gradient(to bottom, #111827, #111827) !important;
  
  background-size: 130% 130%, 120% 120%, 100% 100% !important;
  animation: 
    auroraDark1 var(--aurora-speed-1) ease-in-out infinite,
    auroraDark2 var(--aurora-speed-2) ease-in-out infinite reverse !important;
}

/* ========================================
   极光动画关键帧
   ======================================== */

/* 🌊 Light Mode 极光动画 */
@keyframes auroraFlow1 {
  0%, 100% {
    background-position: 0% 0%, 100% 100%, 50% 50%, 80% 20%, center;
  }
  25% {
    background-position: 20% 30%, 80% 70%, 40% 60%, 60% 40%, center;
  }
  50% {
    background-position: 60% 40%, 40% 60%, 70% 30%, 30% 70%, center;
  }
  75% {
    background-position: 80% 70%, 20% 30%, 60% 80%, 40% 60%, center;
  }
}

@keyframes auroraFlow2 {
  0%, 100% {
    background-position: 100% 0%, 0% 100%, 80% 20%, 20% 80%, center;
  }
  33% {
    background-position: 70% 30%, 30% 70%, 50% 50%, 50% 50%, center;
  }
  66% {
    background-position: 30% 70%, 70% 30%, 20% 80%, 80% 20%, center;
  }
}

@keyframes auroraFlow3 {
  0%, 100% {
    background-position: 50% 50%, 50% 50%, 50% 50%, 50% 50%, center;
  }
  20% {
    background-position: 30% 70%, 70% 30%, 40% 60%, 60% 40%, center;
  }
  40% {
    background-position: 80% 20%, 20% 80%, 60% 40%, 40% 60%, center;
  }
  60% {
    background-position: 60% 40%, 40% 60%, 80% 20%, 20% 80%, center;
  }
  80% {
    background-position: 20% 80%, 80% 20%, 30% 70%, 70% 30%, center;
  }
}

@keyframes auroraFlow4 {
  0%, 100% {
    background-position: 40% 60%, 60% 40%, 20% 80%, 80% 20%, center;
  }
  50% {
    background-position: 60% 40%, 40% 60%, 80% 20%, 20% 80%, center;
  }
}

/* 🌙 Dark Mode 专用极光动画 */
@keyframes auroraDark1 {
  0%, 100% {
    background-position: 0% 0%, 100% 100%, 50% 30%, 70% 70%, center;
  }
  30% {
    background-position: 30% 20%, 70% 80%, 40% 70%, 60% 40%, center;
  }
  60% {
    background-position: 70% 60%, 30% 40%, 80% 20%, 20% 80%, center;
  }
}

@keyframes auroraDark2 {
  0%, 100% {
    background-position: 100% 20%, 0% 80%, 60% 40%, 40% 60%, center;
  }
  40% {
    background-position: 60% 60%, 40% 40%, 30% 70%, 70% 30%, center;
  }
  80% {
    background-position: 20% 80%, 80% 20%, 70% 30%, 30% 70%, center;
  }
}

@keyframes auroraDark3 {
  0%, 100% {
    background-position: 30% 30%, 70% 70%, 50% 50%, 50% 50%, center;
  }
  25% {
    background-position: 50% 70%, 50% 30%, 70% 40%, 30% 60%, center;
  }
  75% {
    background-position: 70% 50%, 30% 50%, 40% 80%, 60% 20%, center;
  }
}

@keyframes auroraDark4 {
  0%, 100% {
    background-position: 60% 40%, 40% 60%, 30% 70%, 70% 30%, center;
  }
  50% {
    background-position: 40% 70%, 70% 40%, 60% 30%, 40% 80%, center;
  }
}

/* ========================================
   响应式适配与性能优化
   ======================================== */

/* 📱 移动端优化 */
@media (max-width: 768px) {
  .bg-gray-50 {
    background: 
      radial-gradient(
        ellipse 800px 600px at 30% 30%, 
        var(--aurora-color-1), 
        transparent 80%
      ),
      radial-gradient(
        ellipse 700px 800px at 70% 70%, 
        var(--aurora-color-2), 
        transparent 80%
      ),
      linear-gradient(to bottom, #f9fafb, #f9fafb) !important;
    
    background-size: 180% 180%, 160% 160%, 100% 100% !important;
    animation: 
      auroraFlow1 calc(var(--aurora-speed-1) * 1.5) ease-in-out infinite,
      auroraFlow2 calc(var(--aurora-speed-2) * 1.5) ease-in-out infinite reverse !important;
  }
  
  .dark .bg-gray-50 {
    background: 
      radial-gradient(
        ellipse 800px 600px at 30% 30%, 
        var(--aurora-color-1), 
        transparent 80%
      ),
      radial-gradient(
        ellipse 700px 800px at 70% 70%, 
        var(--aurora-color-2), 
        transparent 80%
      ),
      linear-gradient(to bottom, #111827, #111827) !important;
  }
}

/* ========================================
   可访问性适配
   ======================================== */

/* 🚫 减少动画偏好适配 */
@media (prefers-reduced-motion: reduce) {
  .bg-gray-50,
  .dark .bg-gray-50,
  .bg-gray-900,
  .dark .bg-gray-900 {
    animation: none !important;
    background-position: 50% 50% !important;
  }
}

/* 🎨 高对比度模式适配 */
@media (prefers-contrast: high) {
  .bg-gray-50 {
    background: #f9fafb !important;
  }
  
  .dark .bg-gray-50,
  .dark .bg-gray-900 {
    background: #111827 !important;
  }
}

/* ========================================
   安全隔离
   ======================================== */

/* 🛡️ PoT Mode完全隔离 */
.pot-mode-active {
  background: var(--pot-bg-gradient-start) !important;
  animation: none !important;
}

/* 🛡️ AIGC全屏模式隔离 */
.aigc-fullscreen-mode .bg-gray-50,
.aigc-fullscreen-mode .bg-gray-900 {
  background-image: none !important;
  animation: none !important;
}

.aigc-fullscreen-mode .bg-gray-50 {
  background: #f9fafb !important;
}

.dark .aigc-fullscreen-mode .bg-gray-50,
.dark .aigc-fullscreen-mode .bg-gray-900 {
  background: #111827 !important;
}